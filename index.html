<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mine-IT Data Platform Architecture</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>Mine-IT Predictive Maintenance Data Platform</h1>
            <p class="subtitle">AWS Cloud Architecture Design</p>
        </div>
    </header>

    <nav>
        <div class="container">
            <ul>
                <li><a href="#overview">Overview</a></li>
                <li><a href="#architecture">Architecture (Embedded)</a></li>
                <li><a href="aws_architecture_page.html">AWS Architecture Diagram</a></li>
                <li><a href="mermaid_diagram.html">Mermaid Diagram</a></li>
                <li><a href="#components">Components</a></li>
                <li><a href="#concerns">Key Concerns</a></li>
            </ul>
        </div>
    </nav>

    <main>
        <div class="container">
            <section id="overview">
                <h2>Overview</h2>
                <p>This document presents a comprehensive AWS-based data platform design for Mine-IT's Predictive Maintenance system. The platform is designed to ingest data from IoT devices in mines, inventory management systems, and field services systems, process this data, deploy a machine learning model for predictive maintenance, and generate alerts and reports.</p>
                
                <div class="requirements">
                    <h3>Key Requirements</h3>
                    <ol>
                        <li>Metrics from various IoT devices deployed in mines operated by the company should be ingested, normalized and aggregated in 10 minute windows</li>
                        <li>Fresh data from the inventory management system needs to be available on an hourly basis. Data is available via inventory system's api in JSON format</li>
                        <li>Data from on-premises field services system database (RDBMS) needs to be available on an hourly basis</li>
                        <li>A Predictive Maintenance machine learning model needs to be deployed in a scalable and reliable way</li>
                        <li>An easy way to add different subscribers that consume alerts generated by the data platform</li>
                        <li>A daily report of hourly average of alerts generated by data platform, by mine location, hardware vendor name and device model</li>
                    </ol>
                </div>
            </section>

            <section id="architecture">
                <h2>Architecture Diagram (Embedded)</h2>
                <p>An iframe embedding the AWS diagram. See the dedicated <a href="aws_architecture_page.html">AWS Architecture Diagram page</a> for a larger view or the <a href="mermaid_diagram.html">Mermaid Diagram page</a> for an alternative representation.</p>
                <div class="diagram-container">
                    <iframe id="aws-diagram" src="aws_diagram.html" frameborder="0"></iframe>
                </div>
            </section>

            <section id="components">
                <h2>Architecture Components</h2>
                
                <div class="component-section">
                    <h3>Data Ingestion Layer</h3>
                    <div class="component-details">
                        <h4>IoT Device Data Ingestion</h4>
                        <ul>
                            <li><strong>AWS IoT Core</strong> serves as the secure entry point for all IoT device data from mining equipment, providing device authentication, message routing, and device management capabilities.</li>
                            <li><strong>IoT Rules</strong> are configured to process incoming device messages in real-time and route them to appropriate destinations based on content and metadata.</li>
                            <li><strong>Amazon Kinesis Data Streams</strong> provides scalable, real-time data streaming to handle high-volume IoT telemetry data from potentially thousands of mining equipment sensors.</li>
                            <li><strong>Amazon Kinesis Data Analytics</strong> performs the required 10-minute window aggregations on streaming data using SQL-based time windows, ensuring data is normalized and aggregated as specified in requirement #1.</li>
                        </ul>
                    </div>

                    <div class="component-details">
                        <h4>Inventory Management System Integration</h4>
                        <ul>
                            <li><strong>Amazon EventBridge</strong> schedules hourly data pulls from the inventory management system, satisfying requirement #2 for hourly data freshness.</li>
                            <li><strong>AWS Lambda</strong> functions connect to the inventory system API, process the JSON responses, and store the data in appropriate formats.</li>
                            <li><strong>Amazon API Gateway</strong> provides an alternative push-based approach where the inventory system can push updates directly to the data platform when changes occur, enabling near real-time updates for critical inventory changes.</li>
                        </ul>
                    </div>

                    <div class="component-details">
                        <h4>Field Services System Integration</h4>
                        <ul>
                            <li><strong>AWS Database Migration Service (DMS)</strong> with Change Data Capture (CDC) continuously replicates data from the on-premises field services RDBMS, ensuring hourly data freshness as required in requirement #3.</li>
                            <li><strong>AWS Direct Connect</strong> establishes a dedicated network connection from the on-premises environment to AWS, ensuring secure, reliable, and low-latency data transfer.</li>
                            <li><strong>Amazon EventBridge</strong> triggers hourly synchronization jobs to ensure data consistency between the on-premises system and the cloud platform.</li>
                        </ul>
                    </div>
                </div>

                <div class="component-section">
                    <h3>Data Storage Layer</h3>
                    <div class="component-details">
                        <h4>Raw Data Storage</h4>
                        <ul>
                            <li><strong>Amazon S3</strong> serves as the central data lake for storing raw data from all sources in its original format, providing a cost-effective, durable, and scalable storage solution.</li>
                            <li><strong>S3 Lifecycle Policies</strong> automatically manage data retention periods based on data type, age, and business value, moving older data to lower-cost storage tiers like S3 Glacier.</li>
                            <li><strong>S3 Access Points</strong> provide fine-grained access control to different datasets within the data lake, enhancing security.</li>
                        </ul>
                    </div>

                    <div class="component-details">
                        <h4>Processed Data Storage</h4>
                        <ul>
                            <li><strong>Amazon DynamoDB</strong> stores processed IoT metrics for fast, low-latency access by the ML model and alerting systems, with Time-to-Live (TTL) settings for automatic data expiration.</li>
                            <li><strong>Amazon RDS</strong> maintains a relational database for field services data, preserving the relational structure needed for complex queries and maintaining referential integrity.</li>
                            <li><strong>Amazon Redshift</strong> serves as the data warehouse for analytical queries, historical analysis, and reporting, with optimized storage for the daily reports required in requirement #6.</li>
                        </ul>
                    </div>
                </div>

                <div class="component-section">
                    <h3>Processing Layer</h3>
                    <div class="component-details">
                        <h4>Data Processing</h4>
                        <ul>
                            <li><strong>AWS Glue</strong> provides serverless ETL (Extract, Transform, Load) capabilities to process data from various sources, with a centralized Data Catalog for metadata management.</li>
                            <li><strong>Amazon EMR</strong> handles large-scale data processing tasks that exceed Lambda's capabilities, such as complex data transformations or machine learning feature engineering.</li>
                            <li><strong>AWS Lambda</strong> performs lightweight, event-driven transformations and data enrichment, particularly for real-time data processing needs.</li>
                        </ul>
                    </div>

                    <div class="component-details">
                        <h4>ML Model Deployment</h4>
                        <ul>
                            <li><strong>Amazon SageMaker</strong> hosts the Predictive Maintenance ML model in a scalable and reliable way as required in requirement #4, with automatic scaling based on inference demand.</li>
                            <li><strong>SageMaker Model Registry</strong> manages model versions, enabling controlled deployment of new model iterations and rollback capabilities if issues arise.</li>
                            <li><strong>SageMaker Pipelines</strong> orchestrates the ML workflow, including data preparation, model training, evaluation, and deployment.</li>
                            <li><strong>SageMaker Endpoints</strong> provide real-time inference capabilities with high availability across multiple Availability Zones.</li>
                        </ul>
                    </div>
                </div>

                <div class="component-section">
                    <h3>Alert and Notification Layer</h3>
                    <div class="component-details">
                        <h4>Alert Generation</h4>
                        <ul>
                            <li><strong>Amazon EventBridge</strong> processes events from the ML model and triggers appropriate alert workflows based on equipment risk levels.</li>
                            <li><strong>AWS Lambda</strong> implements the alert logic, enriching alerts with contextual information from inventory and field services data.</li>
                            <li><strong>Amazon SNS</strong> distributes notifications to various subscribers, fulfilling requirement #5 for an easy way to add different alert subscribers.</li>
                        </ul>
                    </div>

                    <div class="component-details">
                        <h4>Subscriber Management</h4>
                        <ul>
                            <li><strong>Amazon SNS Topics</strong> are organized by alert category, severity, and mine location, allowing subscribers to receive only relevant alerts.</li>
                            <li><strong>Amazon SQS</strong> queues decouple alert producers from consumers, ensuring reliable delivery even when subscribers are temporarily unavailable.</li>
                            <li><strong>AWS Lambda</strong> functions provide custom integration with external systems like email, SMS, ticketing systems, or mobile apps.</li>
                        </ul>
                    </div>
                </div>

                <div class="component-section">
                    <h3>Reporting Layer</h3>
                    <div class="component-details">
                        <h4>Report Generation</h4>
                        <ul>
                            <li><strong>Amazon QuickSight</strong> creates interactive dashboards and visualizations for operational insights and executive reporting.</li>
                            <li><strong>AWS Glue</strong> prepares data specifically for the daily report requirement (#6), aggregating hourly alerts by mine location, hardware vendor, and device model.</li>
                            <li><strong>Amazon Athena</strong> runs SQL queries directly against S3 data for ad-hoc analysis and custom reporting needs.</li>
                            <li><strong>AWS Lambda</strong> generates and distributes the required daily reports automatically, with scheduling handled by EventBridge.</li>
                        </ul>
                    </div>
                </div>

                <div class="component-section">
                    <h3>Security and Governance Layer</h3>
                    <div class="component-details">
                        <h4>Identity and Access Management</h4>
                        <ul>
                            <li><strong>AWS IAM</strong> implements the principle of least privilege, ensuring each component has only the permissions necessary for its function.</li>
                            <li><strong>AWS Organizations</strong> provides multi-account management if Mine-IT requires separation between development, testing, and production environments.</li>
                            <li><strong>AWS Single Sign-On</strong> centralizes access management for administrators and users of the data platform.</li>
                        </ul>
                    </div>

                    <div class="component-details">
                        <h4>Data Security</h4>
                        <ul>
                            <li><strong>AWS KMS</strong> manages encryption keys for data-at-rest and data-in-transit, ensuring end-to-end encryption throughout the platform.</li>
                            <li><strong>AWS CloudHSM</strong> provides hardware-based key storage for the most sensitive encryption keys if required by Mine-IT's security policies.</li>
                            <li><strong>VPC Endpoints</strong> enable private communication between services without traversing the public internet, enhancing security.</li>
                        </ul>
                    </div>

                    <div class="component-details">
                        <h4>Compliance and Governance</h4>
                        <ul>
                            <li><strong>AWS Config</strong> continuously monitors and records AWS resource configurations, ensuring compliance with security policies.</li>
                            <li><strong>AWS CloudTrail</strong> logs all API activity for audit purposes, providing a comprehensive history of actions taken within the platform.</li>
                            <li><strong>Amazon Macie</strong> automatically discovers and protects sensitive data, such as personally identifiable information that might be present in maintenance records.</li>
                        </ul>
                    </div>
                </div>

                <div class="component-section">
                    <h3>Operational Excellence Layer</h3>
                    <div class="component-details">
                        <h4>Monitoring and Observability</h4>
                        <ul>
                            <li><strong>Amazon CloudWatch</strong> provides comprehensive monitoring of all components, with custom metrics, logs, and alarms for proactive issue detection.</li>
                            <li><strong>AWS X-Ray</strong> enables distributed tracing across the entire platform, helping to identify performance bottlenecks and troubleshoot issues.</li>
                            <li><strong>Amazon Managed Grafana</strong> offers advanced visualization capabilities for operational dashboards and real-time monitoring.</li>
                        </ul>
                    </div>

                    <div class="component-details">
                        <h4>Infrastructure as Code</h4>
                        <ul>
                            <li><strong>AWS CloudFormation</strong> templates define the entire infrastructure, enabling consistent deployments across environments and disaster recovery scenarios.</li>
                            <li><strong>AWS CDK</strong> allows infrastructure definition using familiar programming languages, enhancing developer productivity and code reuse.</li>
                            <li><strong>AWS Service Catalog</strong> provides standardized service offerings for Mine-IT's internal teams to consume.</li>
                        </ul>
                    </div>

                    <div class="component-details">
                        <h4>CI/CD Pipeline</h4>
                        <ul>
                            <li><strong>AWS CodePipeline</strong> orchestrates the continuous integration and delivery process for both application code and infrastructure changes.</li>
                            <li><strong>AWS CodeBuild</strong> automates build and test processes, ensuring quality before deployment.</li>
                            <li><strong>AWS CodeDeploy</strong> manages the deployment process with strategies like blue/green deployment to minimize downtime.</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section id="concerns">
                <h2>Addressing Key Concerns</h2>
                
                <div class="concern">
                    <h3>Data Freshness and Integrity</h3>
                    <ul>
                        <li><strong>Real-time Processing</strong>: IoT data is processed in real-time through Kinesis streams, ensuring immediate availability for analysis.</li>
                        <li><strong>Scheduled Synchronization</strong>: Both inventory and field services data are synchronized hourly as required, with EventBridge ensuring reliable scheduling.</li>
                        <li><strong>Change Data Capture</strong>: DMS with CDC ensures only changed records are processed, minimizing latency and resource usage while maintaining data integrity.</li>
                        <li><strong>Data Validation</strong>: AWS Glue includes data quality checks to identify and handle anomalies, ensuring the ML model works with clean, valid data.</li>
                        <li><strong>Consistency Checks</strong>: Automated reconciliation processes verify data consistency across systems, with alerting for any discrepancies.</li>
                    </ul>
                </div>
                
                <div class="concern">
                    <h3>Data Retention</h3>
                    <ul>
                        <li><strong>Tiered Storage Strategy</strong>: Data is automatically moved through storage tiers based on age and access patterns, optimizing cost while maintaining accessibility.</li>
                        <li><strong>S3 Lifecycle Policies</strong>: Automate the transition of data between S3 storage classes and eventual archival or deletion.</li>
                        <li><strong>DynamoDB TTL</strong>: Automatically expires time-sensitive data from DynamoDB tables to maintain performance and control costs.</li>
                        <li><strong>Redshift Spectrum</strong>: Enables querying of historical data in S3 without loading it into Redshift, providing cost-effective access to archived data.</li>
                        <li><strong>Compliance Alignment</strong>: Retention periods are aligned with industry regulations and Mine-IT's internal policies.</li>
                    </ul>
                </div>
                
                <div class="concern">
                    <h3>ML Model Lifecycle</h3>
                    <ul>
                        <li><strong>Model Development</strong>: SageMaker provides a complete environment for developing, training, and tuning the Predictive Maintenance model.</li>
                        <li><strong>Model Deployment</strong>: SageMaker Endpoints enable scalable, highly available model hosting with automatic scaling based on demand.</li>
                        <li><strong>Model Monitoring</strong>: CloudWatch metrics track model performance, with alerts for degradation or drift.</li>
                        <li><strong>Model Updates</strong>: SageMaker Pipelines automate the retraining and deployment process when new data becomes available or performance degrades.</li>
                        <li><strong>Version Control</strong>: SageMaker Model Registry maintains a history of model versions with metadata about training datasets and performance metrics.</li>
                        <li><strong>A/B Testing</strong>: SageMaker enables testing new model versions against the current production version before full deployment.</li>
                    </ul>
                </div>
                
                <div class="concern">
                    <h3>Security and Access Control</h3>
                    <ul>
                        <li><strong>Defense in Depth</strong>: Multiple security layers protect the platform, from network security to application-level controls.</li>
                        <li><strong>Encryption Everywhere</strong>: All data is encrypted both at rest and in transit using AWS KMS managed keys.</li>
                        <li><strong>Fine-grained Access Control</strong>: IAM policies implement least-privilege access, with resource-level permissions and conditional access where appropriate.</li>
                        <li><strong>Network Isolation</strong>: VPC security groups and network ACLs restrict communication paths between components.</li>
                        <li><strong>Audit Logging</strong>: Comprehensive logging via CloudTrail and CloudWatch provides a complete audit trail of all system activities.</li>
                        <li><strong>Secrets Management</strong>: AWS Secrets Manager securely stores and automatically rotates credentials for database access and API keys.</li>
                    </ul>
                </div>
                
                <div class="concern">
                    <h3>Reliability/Availability</h3>
                    <ul>
                        <li><strong>Multi-AZ Deployment</strong>: All critical components are deployed across multiple Availability Zones to ensure high availability.</li>
                        <li><strong>Automatic Scaling</strong>: Services like Lambda, DynamoDB, and SageMaker endpoints automatically scale to handle varying loads.</li>
                        <li><strong>Fault Isolation</strong>: The microservices architecture isolates failures to prevent system-wide outages.</li>
                        <li><strong>Disaster Recovery</strong>: Regular backups and cross-region replication enable recovery from regional failures if needed.</li>
                        <li><strong>Load Balancing</strong>: Distributes traffic across multiple instances to optimize resource utilization and maintain performance under load.</li>
                        <li><strong>Circuit Breakers</strong>: Prevent cascade failures when downstream services experience issues.</li>
                    </ul>
                </div>
                
                <div class="concern">
                    <h3>Operational Best Practices</h3>
                    <ul>
                        <li><strong>Infrastructure as Code</strong>: All infrastructure is defined as code in CloudFormation templates, enabling consistent deployments and version control.</li>
                        <li><strong>Automated Deployments</strong>: CI/CD pipelines automate testing and deployment, reducing human error and enabling frequent, low-risk updates.</li>
                        <li><strong>Comprehensive Monitoring</strong>: CloudWatch dashboards provide visibility into system health, with automated alerts for anomalies.</li>
                        <li><strong>Centralized Logging</strong>: All logs are aggregated in CloudWatch Logs for unified searching and analysis.</li>
                        <li><strong>Cost Management</strong>: AWS Cost Explorer and budgeting tools monitor and optimize cloud spending.</li>
                        <li><strong>Documentation</strong>: Architecture diagrams, runbooks, and operational procedures are maintained in a central repository.</li>
                    </ul>
                </div>
                
                <div class="concern">
                    <h3>Clarity in Expressing the Solution</h3>
                    <ul>
                        <li><strong>Modular Architecture</strong>: The solution is organized into clear functional layers, making it easy to understand and explain.</li>
                        <li><strong>Requirement Traceability</strong>: Each component is directly linked to one or more of Mine-IT's requirements, ensuring complete coverage.</li>
                        <li><strong>Visual Representation</strong>: The architecture diagram provides a clear visual overview of the entire solution.</li>
                        <li><strong>Consistent Terminology</strong>: AWS service names and industry-standard terms are used consistently throughout the documentation.</li>
                        <li><strong>Implementation Guidance</strong>: The solution includes specific details about how each component should be configured and integrated.</li>
                    </ul>
                </div>
            </section>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Mine-IT Data Platform Design</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Adjust iframe height to content
            const iframe = document.getElementById('aws-diagram');
            if (iframe) { // Check if iframe exists on this page
                iframe.onload = function() {
                    // You might want to set a more dynamic height based on content
                    // or a fixed appropriate height for the embedded diagram.
                    iframe.style.height = '600px'; // Example height
                };
            }
        });
    </script>
</body>
</html>